<!DOCTYPE html>
<html lang="vi">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>3D Neon Heart - Particle Effect</title>
	<script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
	<style>
		* {
			margin: 0;
			padding: 0;
			box-sizing: border-box;
		}

		body {
			font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
			background: linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 50%, #16213e 100%);
			min-height: 100vh;
			overflow: hidden;
			color: #fff;
		}

		#app {
			width: 100vw;
			height: 100vh;
			position: relative;
		}

		#canvas-container {
			width: 100%;
			height: 100%;
			position: absolute;
			top: 0;
			left: 0;
		}

		.controls-panel {
			position: absolute;
			bottom: 2rem;
			left: 50%;
			transform: translateX(-50%);
			background: rgba(0, 0, 0, 0.8);
			backdrop-filter: blur(10px);
			border-radius: 20px;
			padding: 2rem;
			box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
			border: 1px solid rgba(255, 255, 255, 0.1);
			min-width: 300px;
			max-width: 90vw;
		}

		.title {
			text-align: center;
			font-size: 2rem;
			font-weight: 700;
			margin-bottom: 1.5rem;
			background: linear-gradient(135deg, #ff6b9d, #c44569, #ff6b9d);
			-webkit-background-clip: text;
			-webkit-text-fill-color: transparent;
			background-clip: text;
			text-shadow: 0 0 30px rgba(255, 107, 157, 0.5);
		}

		.control-group {
			margin-bottom: 1.5rem;
		}

		.control-label {
			display: block;
			margin-bottom: 0.75rem;
			font-size: 0.9rem;
			font-weight: 600;
			color: #fff;
			text-transform: uppercase;
			letter-spacing: 1px;
		}

		.color-buttons {
			display: flex;
			gap: 0.75rem;
			flex-wrap: wrap;
			justify-content: center;
		}

		.color-btn {
			width: 50px;
			height: 50px;
			border-radius: 50%;
			border: 3px solid transparent;
			cursor: pointer;
			transition: all 0.3s ease;
			box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
			position: relative;
		}

		.color-btn:hover {
			transform: scale(1.1);
			box-shadow: 0 0 20px currentColor;
		}

		.color-btn.active {
			border-color: #fff;
			box-shadow: 0 0 25px currentColor, 0 0 50px currentColor;
			transform: scale(1.15);
		}

		.color-btn::after {
			content: '';
			position: absolute;
			top: 50%;
			left: 50%;
			transform: translate(-50%, -50%);
			width: 20px;
			height: 20px;
			border-radius: 50%;
			background: rgba(255, 255, 255, 0.3);
			opacity: 0;
			transition: opacity 0.3s;
		}

		.color-btn.active::after {
			opacity: 1;
		}

		.size-control {
			display: flex;
			align-items: center;
			gap: 1rem;
		}

		.slider {
			flex: 1;
			height: 8px;
			border-radius: 5px;
			background: rgba(255, 255, 255, 0.2);
			outline: none;
			-webkit-appearance: none;
			appearance: none;
		}

		.slider::-webkit-slider-thumb {
			-webkit-appearance: none;
			appearance: none;
			width: 20px;
			height: 20px;
			border-radius: 50%;
			background: linear-gradient(135deg, #ff6b9d, #c44569);
			cursor: pointer;
			box-shadow: 0 0 15px rgba(255, 107, 157, 0.8);
			transition: all 0.3s;
		}

		.slider::-webkit-slider-thumb:hover {
			transform: scale(1.2);
			box-shadow: 0 0 25px rgba(255, 107, 157, 1);
		}

		.slider::-moz-range-thumb {
			width: 20px;
			height: 20px;
			border-radius: 50%;
			background: linear-gradient(135deg, #ff6b9d, #c44569);
			cursor: pointer;
			border: none;
			box-shadow: 0 0 15px rgba(255, 107, 157, 0.8);
			transition: all 0.3s;
		}

		.slider::-moz-range-thumb:hover {
			transform: scale(1.2);
			box-shadow: 0 0 25px rgba(255, 107, 157, 1);
		}

		.size-value {
			min-width: 50px;
			text-align: center;
			font-weight: 600;
			font-size: 1rem;
			color: #ff6b9d;
			text-shadow: 0 0 10px rgba(255, 107, 157, 0.5);
		}

		.info-text {
			text-align: center;
			font-size: 0.85rem;
			color: rgba(255, 255, 255, 0.6);
			margin-top: 1rem;
		}

		@media (max-width: 768px) {
			.controls-panel {
				bottom: 1rem;
				padding: 1.5rem;
			}

			.title {
				font-size: 1.5rem;
				margin-bottom: 1rem;
			}

			.color-btn {
				width: 40px;
				height: 40px;
			}

			.control-group {
				margin-bottom: 1rem;
			}
		}
	</style>
</head>
<body>
	<div id="app">
		<div id="canvas-container" ref="canvasContainer"></div>
		
		<div class="controls-panel">
			<h1 class="title">üíñ 3D Neon Heart</h1>
			
			<div class="control-group">
				<label class="control-label">M√†u s·∫Øc</label>
				<div class="color-buttons">
					<button
						v-for="(color, index) in colors"
						:key="index"
						class="color-btn"
						:class="{ active: selectedColorIndex === index }"
						:style="{ background: color }"
						@click="changeColor(index)"
					></button>
				</div>
			</div>

			<div class="control-group">
				<label class="control-label">K√≠ch th∆∞·ªõc</label>
				<div class="size-control">
					<input
						type="range"
						class="slider"
						min="0.5"
						max="2"
						step="0.1"
						v-model.number="size"
						@input="updateSize"
					>
					<span class="size-value">{{ size.toFixed(1) }}x</span>
				</div>
			</div>

			<p class="info-text">ƒêi·ªÅu ch·ªânh m√†u s·∫Øc v√† k√≠ch th∆∞·ªõc tr√°i tim</p>
		</div>
	</div>

	<script>
		const { createApp, ref, onMounted, watch } = Vue;

		createApp({
			setup() {
				const canvasContainer = ref(null);
				const selectedColorIndex = ref(0);
				const size = ref(1.0);
				
				const colors = [
					'#ff6b9d', // Pink
					'#c44569', // Dark Pink
					'#ff1744', // Red
					'#e91e63', // Pink Red
					'#9c27b0', // Purple
					'#673ab7', // Deep Purple
					'#3f51b5', // Indigo
					'#00bcd4', // Cyan
					'#00e676', // Green
					'#ffeb3b', // Yellow
					'#ff9800', // Orange
					'#ff5722'  // Deep Orange
				];

				let scene, camera, renderer, particles, particleSystem;
				let animationId;

				// Heart shape parametric equation
				function heartShape(t, scale = 1) {
					const x = 16 * Math.pow(Math.sin(t), 3) * scale;
					const y = -(13 * Math.cos(t) - 5 * Math.cos(2*t) - 2 * Math.cos(3*t) - Math.cos(4*t)) * scale;
					return { x, y };
				}

				function initThree() {
					// Scene
					scene = new THREE.Scene();
					scene.background = new THREE.Color(0x000000);

					// Camera
					camera = new THREE.PerspectiveCamera(
						75,
						window.innerWidth / window.innerHeight,
						0.1,
						1000
					);
					camera.position.z = 30;

					// Renderer
					renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
					renderer.setSize(window.innerWidth, window.innerHeight);
					renderer.setPixelRatio(window.devicePixelRatio);
					canvasContainer.value.appendChild(renderer.domElement);

					// Create particles
					const particleCount = 2000;
					const geometry = new THREE.BufferGeometry();
					const positions = new Float32Array(particleCount * 3);
					const colors_array = new Float32Array(particleCount * 3);

					// Generate heart shape particles
					for (let i = 0; i < particleCount; i++) {
						const t = (i / particleCount) * Math.PI * 2;
						const { x, y } = heartShape(t, 1);
						const z = (Math.random() - 0.5) * 2;

						positions[i * 3] = x;
						positions[i * 3 + 1] = y;
						positions[i * 3 + 2] = z;

						// Color based on position
						const color = new THREE.Color(colors[selectedColorIndex.value]);
						colors_array[i * 3] = color.r;
						colors_array[i * 3 + 1] = color.g;
						colors_array[i * 3 + 2] = color.b;
					}

					geometry.setAttribute('position', new THREE.BufferAttribute(positions, 3));
					geometry.setAttribute('color', new THREE.BufferAttribute(colors_array, 3));

					// Material with neon glow effect
					const material = new THREE.PointsMaterial({
						size: 0.3,
						vertexColors: true,
						transparent: true,
						opacity: 0.9,
						blending: THREE.AdditiveBlending,
						depthWrite: false
					});

					particleSystem = new THREE.Points(geometry, material);
					scene.add(particleSystem);

					// Add glow effect with additional particles
					const glowGeometry = new THREE.BufferGeometry();
					const glowPositions = new Float32Array(particleCount * 3);
					const glowColors = new Float32Array(particleCount * 3);

					for (let i = 0; i < particleCount; i++) {
						const t = (i / particleCount) * Math.PI * 2;
						const { x, y } = heartShape(t, 1.05);
						const z = (Math.random() - 0.5) * 2;

						glowPositions[i * 3] = x;
						glowPositions[i * 3 + 1] = y;
						glowPositions[i * 3 + 2] = z;

						const color = new THREE.Color(colors[selectedColorIndex.value]);
						glowColors[i * 3] = color.r * 0.5;
						glowColors[i * 3 + 1] = color.g * 0.5;
						glowColors[i * 3 + 2] = color.b * 0.5;
					}

					glowGeometry.setAttribute('position', new THREE.BufferAttribute(glowPositions, 3));
					glowGeometry.setAttribute('color', new THREE.BufferAttribute(glowColors, 3));

					const glowMaterial = new THREE.PointsMaterial({
						size: 0.5,
						vertexColors: true,
						transparent: true,
						opacity: 0.3,
						blending: THREE.AdditiveBlending,
						depthWrite: false
					});

					const glowSystem = new THREE.Points(glowGeometry, glowMaterial);
					scene.add(glowSystem);

					// Animation
					function animate() {
						animationId = requestAnimationFrame(animate);

						// Rotate heart
						particleSystem.rotation.y += 0.005;
						glowSystem.rotation.y += 0.005;

						// Pulsing effect
						const time = Date.now() * 0.001;
						particleSystem.scale.setScalar(size.value + Math.sin(time) * 0.1);
						glowSystem.scale.setScalar(size.value + Math.sin(time) * 0.1);

						renderer.render(scene, camera);
					}

					animate();

					// Store references
					particles = { particleSystem, glowSystem, geometry, glowGeometry };
				}

				function changeColor(index) {
					selectedColorIndex.value = index;
					updateColor();
				}

				function updateColor() {
					if (!particles) return;

					const color = new THREE.Color(colors[selectedColorIndex.value]);
					const positions = particles.geometry.attributes.position.array;
					const colors_array = particles.geometry.attributes.color.array;
					const glowColors = particles.glowGeometry.attributes.color.array;

					for (let i = 0; i < colors_array.length; i += 3) {
						colors_array[i] = color.r;
						colors_array[i + 1] = color.g;
						colors_array[i + 2] = color.b;

						if (i < glowColors.length) {
							glowColors[i] = color.r * 0.5;
							glowColors[i + 1] = color.g * 0.5;
							glowColors[i + 2] = color.b * 0.5;
						}
					}

					particles.geometry.attributes.color.needsUpdate = true;
					particles.glowGeometry.attributes.color.needsUpdate = true;
				}

				function updateSize() {
					// Size is updated in animate loop
				}

				function handleResize() {
					if (!camera || !renderer) return;
					camera.aspect = window.innerWidth / window.innerHeight;
					camera.updateProjectionMatrix();
					renderer.setSize(window.innerWidth, window.innerHeight);
				}

				onMounted(() => {
					initThree();
					window.addEventListener('resize', handleResize);
				});

				watch(size, () => {
					updateSize();
				});

				return {
					canvasContainer,
					selectedColorIndex,
					size,
					colors,
					changeColor,
					updateSize
				};
			}
		}).mount('#app');
	</script>
</body>
</html>
